{"version":3,"sources":["webpack:///./src/functions/functions.js","webpack:///./src/pages/compartirEnRedes.js"],"names":["JSONtoArray","objetoJSON","tipo","arregloAGraficar","k","confirmados","push","acumulados","dia","l","defunciones","acumuladas","ordenarArray","arrayAOrdenar","sort","a","b","dividirMillares","numero","toString","replace","calcularAyer","fecha","mes","slice","CompartirEnRedes","partidos","nombre","nombreBD","datosOriginales","map","partido","nuevos","useState","datos","setDatos","useEffect","fetch","then","response","json","fechaAux","ultimaAct","datoNuevos","ultimosDatos","title","id","className","item","key","fileName","alt","clase","onClick","html2canvas","document","getElementById","scrollY","window","canvas","body","appendChild"],"mappings":"4FAAA,4IAAMA,EAAc,SAACC,EAAYC,GAC/B,IAAIC,EAAmB,GACvB,GAAa,gBAATD,EACF,IAAK,IAAIE,KAAKH,EAAWI,YACvBF,EAAiBG,KAAK,CACpBF,EACAH,EAAWI,YAAYD,GAAGC,YAC1BJ,EAAWI,YAAYD,GAAGG,WAC1BN,EAAWI,YAAYD,GAAGI,WAI9B,IAAK,IAAIC,KAAKR,EAAWS,YACvBP,EAAiBG,KAAK,CACpBG,EACAR,EAAWS,YAAYD,GAAGC,YAC1BT,EAAWS,YAAYD,GAAGE,WAC1BV,EAAWS,YAAYD,GAAGD,MAIhC,OAAOL,GAGHS,EAAe,SAAAC,GAEnB,OADAA,EAAgBA,EAAcC,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAE,GAAKC,EAAE,OAIlDC,EAAkB,SAAAC,GAAM,OAC5BA,EAAOC,WAAWC,QAAQ,wBAAyB,MAE/CC,EAAe,SAAAC,GAInB,IAAIC,EAAMD,EAAME,MAAM,EAAG,GACrBhB,EAAMc,EAAME,MAAM,EAAG,GAazB,OAZY,IAARhB,EAIFe,GADAA,EAAM,MADNA,GAEUC,OAAO,GAKjBhB,GADAA,EAAM,MADNA,GAEUgB,OAAO,GAEMhB,EAAM,IAAMe,EAAM,IAAMD,EAAME,MAAM,EAAG,M,oCCjDlE,6IAUe,SAASC,IACtB,IAAMC,EAAW,CACf,CACEC,OAAQ,SACRC,SAAU,UAEZ,CACED,OAAQ,MACRC,SAAU,OAEZ,CACED,OAAQ,MACRC,SAAU,OAEZ,CACED,OAAQ,gBACRC,SAAU,iBAEZ,CACED,OAAQ,uBACRC,SAAU,MAEZ,CACED,OAAQ,MACRC,SAAU,OAEZ,CACED,OAAQ,mBACRC,SAAU,QAIRC,EAAkBH,EAASI,KAAI,SAAAC,GACnC,OAAO,OAAP,UACKA,EADL,CAEE1B,YAAa,EACb2B,OAAQ,OApC6B,EAwCfC,mBAAS,CACjCX,MAAO,GACPI,SAAUG,IAFLK,EAxCkC,KAwC3BC,EAxC2B,KA+FzC,OAlDAC,qBAAU,WACRC,MAAM,gDACHC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAE,GACJ,IAAMC,EAAWD,EAAKE,UAEhBC,EAAajB,EAASI,KAAI,SAAAC,GAC9B,OAAO,OAAP,UACKA,EADL,CAEE1B,YACEmC,EAAKT,EAAQH,UAAUvB,YAAYoC,GAAUlC,WAC/CyB,OAAQQ,EAAKT,EAAQH,UAAUgB,aAAavC,iBAGhD8B,EAAS,CACPb,MAAOmB,EACPf,SAAUiB,SAGf,IAgCD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKE,MAAM,uBACX,yBAAKC,GAAG,gBACN,wBAAIC,UAAU,2CAAd,4BAC4Bb,EAAMZ,OAEjCY,EAAMR,SAASI,KApCtB,SAAuBkB,GAAO,IACpBrB,EAA0CqB,EAA1CrB,OAAQC,EAAkCoB,EAAlCpB,SAAUvB,EAAwB2C,EAAxB3C,YAAa2B,EAAWgB,EAAXhB,OACvC,OACE,yBAAKiB,IAAKrB,EAAUmB,UAAU,yCAC5B,6BACE,kBAAC,IAAD,CAAOG,SAAatB,EAAL,OAAqBuB,IAAKxB,EAAQyB,MAAM,UAEzD,yBAAKL,UAAU,2CACb,uBAAGA,UAAU,YACV9B,YAAgBZ,GADnB,uBAIF,yBAAK0C,UAAU,gCACb,uBAAGA,UAAU,YACV9B,YAAgBZ,EAAc2B,GADjC,iBAyBJ,mEAAyCE,EAAMZ,OAC/C,0HAIA,uEACA,4BAAQ+B,QAvBZ,WACEC,IAAYC,SAASC,eAAe,gBAAiB,CACnDC,SAAUC,OAAOD,UAChBnB,MAAK,SAAAqB,GACNJ,SAASK,KAAKC,YAAYF,QAmB1B","file":"component---src-pages-compartir-en-redes-js-97ff50313d6071e5a9c0.js","sourcesContent":["const JSONtoArray = (objetoJSON, tipo) => {\r\n  var arregloAGraficar = []\r\n  if (tipo === \"confirmados\") {\r\n    for (var k in objetoJSON.confirmados) {\r\n      arregloAGraficar.push([\r\n        k,\r\n        objetoJSON.confirmados[k].confirmados,\r\n        objetoJSON.confirmados[k].acumulados,\r\n        objetoJSON.confirmados[k].dia,\r\n      ])\r\n    }\r\n  } else {\r\n    for (var l in objetoJSON.defunciones) {\r\n      arregloAGraficar.push([\r\n        l,\r\n        objetoJSON.defunciones[l].defunciones,\r\n        objetoJSON.defunciones[l].acumuladas,\r\n        objetoJSON.defunciones[l].dia,\r\n      ])\r\n    }\r\n  }\r\n  return arregloAGraficar\r\n}\r\n\r\nconst ordenarArray = arrayAOrdenar => {\r\n  arrayAOrdenar = arrayAOrdenar.sort((a, b) => a[3] - b[3])\r\n  return arrayAOrdenar\r\n}\r\n\r\nconst dividirMillares = numero =>\r\n  numero.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\r\n\r\nconst calcularAyer = fecha => {\r\n  /*Convierte la ultima fecha de string a date, para poder restarle un dia,\r\n        despues la regresa a string para poder ser usada en el JSON*/\r\n\r\n  var mes = fecha.slice(3, 5)\r\n  var dia = fecha.slice(0, 2)\r\n  if (dia === 1) {\r\n    //Si es el primero del mes\r\n    mes--\r\n    mes = \"0\" + mes\r\n    mes = mes.slice(-2)\r\n  } else {\r\n    //Si no es el primer dia del mes\r\n    dia--\r\n    dia = \"0\" + dia\r\n    dia = dia.slice(-2)\r\n  }\r\n  const fechaDefunciones = dia + \"-\" + mes + \"-\" + fecha.slice(6, 10)\r\n  return fechaDefunciones\r\n}\r\n\r\nexport { JSONtoArray, ordenarArray, dividirMillares, calcularAyer }\r\n","//React\r\nimport React, { useState, useEffect } from \"react\"\r\nimport Layout from \"../components/Layout\"\r\nimport SEO from \"../components/SEO\"\r\nimport Image from \"../components/Image\"\r\n\r\nimport { dividirMillares } from \"../functions/functions\"\r\n\r\nimport html2canvas from \"html2canvas\"\r\n\r\nexport default function CompartirEnRedes() {\r\n  const partidos = [\r\n    {\r\n      nombre: \"MORENA\",\r\n      nombreBD: \"Morena\",\r\n    },\r\n    {\r\n      nombre: \"PRI\",\r\n      nombreBD: \"PRI\",\r\n    },\r\n    {\r\n      nombre: \"PAN\",\r\n      nombreBD: \"PAN\",\r\n    },\r\n    {\r\n      nombre: \"Independiente\",\r\n      nombreBD: \"Independiente\",\r\n    },\r\n    {\r\n      nombre: \"Movimiento Ciudadano\",\r\n      nombreBD: \"MC\",\r\n    },\r\n    {\r\n      nombre: \"PRD\",\r\n      nombreBD: \"PRD\",\r\n    },\r\n    {\r\n      nombre: \"Encuentro Social\",\r\n      nombreBD: \"PES\",\r\n    },\r\n  ] //Escribe aqui el nombre de los partidos a mostrar, algunos partido usan otro nombre en la base datos, por favor, tambien anota ese nombre\r\n\r\n  const datosOriginales = partidos.map(partido => {\r\n    return {\r\n      ...partido,\r\n      confirmados: 1,\r\n      nuevos: 1,\r\n    }\r\n  })\r\n\r\n  const [datos, setDatos] = useState({\r\n    fecha: \"\",\r\n    partidos: datosOriginales,\r\n  })\r\n\r\n  useEffect(() => {\r\n    fetch(\"https://covidporpartido.firebaseio.com/.json\")\r\n      .then(response => response.json())\r\n      .then(json => {\r\n        const fechaAux = json.ultimaAct\r\n\r\n        const datoNuevos = partidos.map(partido => {\r\n          return {\r\n            ...partido,\r\n            confirmados:\r\n              json[partido.nombreBD].confirmados[fechaAux].acumulados,\r\n            nuevos: json[partido.nombreBD].ultimosDatos.confirmados,\r\n          }\r\n        })\r\n        setDatos({\r\n          fecha: fechaAux,\r\n          partidos: datoNuevos,\r\n        })\r\n      })\r\n  }, [])\r\n\r\n  function generarImagen(item) {\r\n    const { nombre, nombreBD, confirmados, nuevos } = item\r\n    return (\r\n      <div key={nombreBD} className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <div>\r\n          <Image fileName={`${nombreBD}.png`} alt={nombre} clase=\"w-24\" />\r\n        </div>\r\n        <div className=\"col-span-2 flex flex-col justify-center\">\r\n          <p className=\"text-3xl\">\r\n            {dividirMillares(confirmados)} casos confirmados\r\n          </p>\r\n        </div>\r\n        <div className=\"flex flex-col justify-center\">\r\n          <p className=\"text-2xl\">\r\n            {dividirMillares(confirmados - nuevos)} nuevos\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  function imprimirImagen() {\r\n    html2canvas(document.getElementById(\"imagenDiaria\"), {\r\n      scrollY: -window.scrollY,\r\n    }).then(canvas => {\r\n      document.body.appendChild(canvas)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <SEO title=\"Compartir en redes\" />\r\n      <div id=\"imagenDiaria\">\r\n        <h2 className=\"text-4xl font-semibold my-4 text-center\">\r\n          Datos de COVID-19 al dia {datos.fecha}\r\n        </h2>\r\n        {datos.partidos.map(generarImagen)}\r\n      </div>\r\n      <p>Casos de COVID-19 Por Partido al día {datos.fecha}</p>\r\n      <p>\r\n        #COVID #COVID19 #Coronavirus #PRI #MORENA #PAN #PRD #MC #ES\r\n        #Independiente #COVIDPorPartido\r\n      </p>\r\n      <p>Más información en http://bit.ly/3n4pNpv</p>\r\n      <button onClick={imprimirImagen}>Generar imagen</button>\r\n    </Layout>\r\n  )\r\n}\r\n"],"sourceRoot":""}